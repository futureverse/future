<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a future assignment — futureAssign • future</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a future assignment — futureAssign"><meta name="description" content='x %&amp;lt;-% value (also known as a "future assignment") and
futureAssign("x", value) create a Future that evaluates the expression
(value) and binds it to variable x (as a
promise). The expression is evaluated in parallel
in the background. Later on, when x is first queried, the value of future
is automatically retrieved as it were a regular variable and x is
materialized as a regular value.'><meta property="og:description" content='x %&amp;lt;-% value (also known as a "future assignment") and
futureAssign("x", value) create a Future that evaluates the expression
(value) and binds it to variable x (as a
promise). The expression is evaluated in parallel
in the background. Later on, when x is first queried, the value of future
is automatically retrieved as it were a regular variable and x is
materialized as a regular value.'><meta property="og:image" content="https://future.futureverse.org/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">future</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.68.0-9037</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/future-1-overview.html">A Future for R: A Comprehensive Overview</a></li>
    <li><a class="dropdown-item" href="../articles/future-2-output.html">A Future for R: Text and Message Output</a></li>
    <li><a class="dropdown-item" href="../articles/future-2b-backend.html">A Future for R: Available Future Backends</a></li>
    <li><a class="dropdown-item" href="../articles/future-3-topologies.html">A Future for R: Future Topologies</a></li>
    <li><a class="dropdown-item" href="../articles/future-4-issues.html">A Future for R: Common Issues with Solutions</a></li>
    <li><a class="dropdown-item" href="../articles/future-4-non-exportable-objects.html">A Future for R: Non-Exportable Objects</a></li>
    <li><a class="dropdown-item" href="../articles/future-5-startup.html">A Future for R: Controlling Default Future Strategy</a></li>
    <li><a class="dropdown-item" href="../articles/future-6-future-api-backend-specification.html">A Future for R: Future API Backend Specification</a></li>
    <li><a class="dropdown-item" href="../articles/future-7-for-package-developers.html">A Future for R: Best Practices for Package Developers</a></li>
    <li><a class="dropdown-item" href="../articles/future-8-how-future-is-validated.html">A Future for R: How the Future Framework is Validated</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.futureverse.org/"><span class="fa fas fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><a class="external-link dropdown-item" href="https://doFuture.futureverse.org">doFuture (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://furrr.futureverse.org">furrr (map-reduce)</a></li>
    <li><a class="dropdown-item" href="https://future.futureverse.org">future</a></li>
    <li><a class="external-link dropdown-item" href="https://future.apply.futureverse.org">future.apply (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.batchtools.futureverse.org">future.batchtools (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.callr.futureverse.org">future.callr (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mirai.futureverse.org">future.mirai (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tests.futureverse.org">future.tests</a></li>
    <li><a class="external-link dropdown-item" href="https://globals.futureverse.org">globals</a></li>
    <li><a class="external-link dropdown-item" href="https://listenv.futureverse.org">listenv</a></li>
    <li><a class="external-link dropdown-item" href="https://parallelly.futureverse.org">parallelly</a></li>
    <li><a class="external-link dropdown-item" href="https://progressr.futureverse.org">progressr</a></li>
    <li><a class="external-link dropdown-item" href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tools.futureverse.org">future.tools (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mapreduce.futureverse.org">future.mapreduce (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://marshal.futureverse.org">marshal (experimental)</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=future"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/futureverse/future/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a future assignment</h1>
      <small class="dont-index">Source: <a href="https://github.com/futureverse/future/blob/HEAD/R/delayed_api-futureAssign.R" class="external-link"><code>R/delayed_api-futureAssign.R</code></a>, <a href="https://github.com/futureverse/future/blob/HEAD/R/infix_api-01-futureAssign_OP.R" class="external-link"><code>R/infix_api-01-futureAssign_OP.R</code></a>, <a href="https://github.com/futureverse/future/blob/HEAD/R/infix_api-02-globals_OP.R" class="external-link"><code>R/infix_api-02-globals_OP.R</code></a>, and 7 more</small>
      <div class="d-none name"><code>futureAssign.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>x %&lt;-% value</code> (also known as a "future assignment") and
<code>futureAssign("x", value)</code> create a <a href="Future-class.html">Future</a> that evaluates the expression
(<code>value</code>) and binds it to variable <code>x</code> (as a
<a href="https://rdrr.io/r/base/delayedAssign.html" class="external-link">promise</a>). The expression is evaluated in parallel
in the background. Later on, when <code>x</code> is first queried, the value of future
is automatically retrieved as it were a regular variable and <code>x</code> is
materialized as a regular value.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">futureAssign</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">value</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  substitute <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lazy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  globals <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stdout <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conditions <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  assign.env <span class="op">=</span> <span class="va">envir</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">%&lt;-%</span> <span class="va">value</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%globals%</span> <span class="va">globals</span></span>
<span><span class="va">fassignment</span> <span class="op">%packages%</span> <span class="va">packages</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%seed%</span> <span class="va">seed</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%stdout%</span> <span class="va">capture</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%conditions%</span> <span class="va">capture</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%lazy%</span> <span class="va">lazy</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%label%</span> <span class="va">label</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%plan%</span> <span class="va">strategy</span></span>
<span></span>
<span><span class="va">fassignment</span> <span class="op">%tweak%</span> <span class="va">tweaks</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>the name of a future variable, which will hold the value
of the future expression (as a promise).</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>An <span style="R">R</span> <a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a>.</p></dd>


<dt id="arg-envir">envir<a class="anchor" aria-label="anchor" href="#arg-envir"></a></dt>
<dd><p>The <a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a> from where global objects should be
identified.</p></dd>


<dt id="arg-substitute">substitute<a class="anchor" aria-label="anchor" href="#arg-substitute"></a></dt>
<dd><p>If TRUE, argument <code>expr</code> is
<code><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute()</a></code>:ed, otherwise not.</p></dd>


<dt id="arg-lazy">lazy<a class="anchor" aria-label="anchor" href="#arg-lazy"></a></dt>
<dd><p>If FALSE (default), the future is resolved
eagerly (starting immediately), otherwise not.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(optional) If TRUE, the random seed, that is, the state of the
random number generator (RNG) will be set such that statistically sound
random numbers are produced (also during parallelization).
If FALSE (default), it is assumed that the future expression does neither
need nor use random numbers generation.
To use a fixed random seed, specify a L'Ecuyer-CMRG seed (seven integer)
or a regular RNG seed (a single integer).  If the latter, then a
L'Ecuyer-CMRG seed will be automatically created based on the given seed.
Furthermore, if FALSE, then the future will be monitored to make sure it
does not use random numbers.  If it does and depending on the value of
option <a href="zzz-future.options.html">future.rng.onMisuse</a>, the check is
ignored, an informative warning, or error will be produced.
If <code>seed</code> is NULL, then the effect is as with <code>seed = FALSE</code>
but without the RNG check being performed.</p></dd>


<dt id="arg-globals">globals<a class="anchor" aria-label="anchor" href="#arg-globals"></a></dt>
<dd><p>(optional) a logical, a character vector, or a named list
to control how globals are handled.
For details, see section 'Globals used by future expressions'
in the help for <code><a href="future.html">future()</a></code>.</p></dd>


<dt id="arg-packages">packages<a class="anchor" aria-label="anchor" href="#arg-packages"></a></dt>
<dd><p>(optional) a character vector specifying packages
to be attached in the <span style="R">R</span> environment evaluating the future.</p></dd>


<dt id="arg-stdout">stdout<a class="anchor" aria-label="anchor" href="#arg-stdout"></a></dt>
<dd><p>If TRUE (default), then the standard output is captured,
and re-outputted when <code><a href="value.html">value()</a></code> is called.
If FALSE, any output is silenced (by sinking it to the null device as
it is outputted).
Using <code>stdout = structure(TRUE, drop = TRUE)</code> causes the captured
standard output to be dropped from the future object as soon as it has
been relayed. This can help decrease the overall memory consumed by
captured output across futures.
Using <code>stdout = NA</code> fully avoids intercepting the standard output;
behavior of such unhandled standard output depends on the future backend.</p></dd>


<dt id="arg-conditions">conditions<a class="anchor" aria-label="anchor" href="#arg-conditions"></a></dt>
<dd><p>A character string of conditions classes to be captured
and relayed.  The default is to relay all conditions, including messages
and warnings.  To drop all conditions, use <code>conditions = character(0)</code>.
Errors are always relayed.
Attribute <code>exclude</code> can be used to ignore specific classes, e.g.
<code>conditions = structure("condition", exclude = "message")</code> will capture
all <code>condition</code> classes except those that inherits from the <code>message</code> class.
Using <code>conditions = structure(..., drop = TRUE)</code> causes any captured
conditions to be dropped from the future object as soon as it has
been relayed, e.g. by <code>value(f)</code>. This can help decrease the overall
memory consumed by captured conditions across futures.
Using <code>conditions = NULL</code> (not recommended) avoids intercepting conditions,
except from errors; behavior of such unhandled conditions depends on the
future backend and the environment from which R runs.</p></dd>


<dt id="arg-label">label<a class="anchor" aria-label="anchor" href="#arg-label"></a></dt>
<dd><p>A character string label attached to the future.</p></dd>


<dt id="arg-assign-env">assign.env<a class="anchor" aria-label="anchor" href="#arg-assign-env"></a></dt>
<dd><p>The <a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a> to which the variable
should be assigned.</p></dd>


<dt id="arg-fassignment">fassignment<a class="anchor" aria-label="anchor" href="#arg-fassignment"></a></dt>
<dd><p>The future assignment, e.g.
<code>x %&lt;-% { expr }</code>.</p></dd>


<dt id="arg-capture">capture<a class="anchor" aria-label="anchor" href="#arg-capture"></a></dt>
<dd><p>If TRUE, the standard output will be captured, otherwise not.</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>The backend controlling how the future is
resolved. See <code><a href="plan.html">plan()</a></code> for further details.</p></dd>


<dt id="arg-tweaks">tweaks<a class="anchor" aria-label="anchor" href="#arg-tweaks"></a></dt>
<dd><p>A named list (or vector) with arguments that
should be changed relative to the current backend.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="Future-class.html">Future()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>futureAssign()</code> and <code>x %&lt;-% expr</code> returns the <a href="Future-class.html">Future</a> invisibly,
e.g. <code>f &lt;- futureAssign("x", expr)</code> and <code>f &lt;- (x %&lt;-% expr)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For a future created via a future assignment, <code>x %&lt;-% value</code> or
<code>futureAssign("x", value)</code>, the value is bound to a promise, which when
queried will internally call <code><a href="value.html">value()</a></code>  on the future and which will then
be resolved into a regular variable bound to that value. For example, with
future assignment <code>x %&lt;-% value</code>, the first time variable <code>x</code> is queried
the call blocks if, and only if, the future is not yet resolved. As soon
as it is resolved, and any succeeding queries, querying <code>x</code> will
immediately give the value.</p>
<p>The future assignment construct <code>x %&lt;-% value</code> is not a formal assignment
per se, but a binary infix operator on objects <code>x</code> and expression <code>value</code>.
However, by using non-standard evaluation, this constructs can emulate an
assignment operator similar to <code>x &lt;- value</code>. Due to <span style="R">R</span>'s precedence rules
of operators, future expressions often need to be explicitly bracketed,
e.g. <code>x %&lt;-% { a + b }</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="adjust-future-arguments-of-a-future-assignment">Adjust future arguments of a future assignment<a class="anchor" aria-label="anchor" href="#adjust-future-arguments-of-a-future-assignment"></a></h2>



<p><code><a href="future.html">future()</a></code> and <code>futureAssign()</code> take several arguments that can be used
to explicitly specify what global variables and packages the future should
use. They can also be used to override default behaviors of the future,
e.g. whether output should be relayed or not. When using a future
assignment, these arguments can be specified via corresponding
assignment expression.  For example, <code>x %&lt;-% { rnorm(10) } %seed% TRUE</code>
corresponds to <code>futureAssign("x", { rnorm(10) }, seed = TRUE)</code>. Here are
a several examples.</p>
<p>To explicitly specify variables and functions that a future assignment
should use, use <code>%globals%</code>. To explicitly specify which packages need
to be attached for the evaluate to success, use <code>%packages%</code>. For
example,</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="sc">%&lt;-%</span> { <span class="fu">median</span>(x) } <span class="sc">%globals%</span> <span class="fu">list</span>(<span class="at">x =</span> x) <span class="sc">%packages%</span> <span class="st">"stats"</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> y</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.03956372</span></span></code></pre><p></p></div>
<p>The <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> function is part of the 'stats' package.</p>
<p>To declare that you will generate random numbers, use <code>%seed%</code>, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">rnorm</span>(<span class="dv">3</span>) } <span class="sc">%seed%</span> <span class="cn">TRUE</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> x</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.2590562</span> <span class="sc">-</span><span class="fl">1.2262495</span>  <span class="fl">0.8858702</span></span></code></pre><p></p></div>
<p>To disable relaying of standard output (e.g. <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code>, and
<code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code>), while keeping relaying of conditions (e.g. <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> and</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">cat</span>(<span class="st">"Hello</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">message</span>(<span class="st">"Hi there"</span>); <span class="dv">42</span> } <span class="sc">%stdout%</span> <span class="cn">FALSE</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="dv">13</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>Hi there</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span> z</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">55</span></span></code></pre><p></p></div>
<p>To disable relaying of conditions, use <code>%conditions%</code>, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">cat</span>(<span class="st">"Hello</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">message</span>(<span class="st">"Hi there"</span>); <span class="dv">42</span> } <span class="sc">%conditions%</span> <span class="fu">character</span>(<span class="dv">0</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="dv">13</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>Hello</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span> z</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">55</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">print</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>); <span class="fu">message</span>(<span class="st">"Hello"</span>); <span class="dv">42</span> } <span class="sc">%stdout%</span> <span class="cn">FALSE</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="dv">13</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>Hello</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span> z</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">55</span></span></code></pre><p></p></div>
<p>To create a future without launching in such that it will only be
processed if the value is really needed, use <code>%lazy%</code>, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">Sys.sleep</span>(<span class="dv">5</span>); <span class="dv">42</span> } <span class="sc">%lazy%</span> <span class="cn">TRUE</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(z <span class="ot">&lt;-</span> x <span class="sc">+</span> y)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  user  system elapsed</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="fl">0.004</span>   <span class="fl">0.000</span>   <span class="fl">5.008</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="sc">&gt;</span> z</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">97</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="error-handling">Error handling<a class="anchor" aria-label="anchor" href="#error-handling"></a></h2>



<p>Because future assignments are promises, errors produced by the the
future expression will not be signaled until the value of the future is
requested. For example, if you create a future assignment that produce
an error, you will not be affected by the error until you "touch" the
future-assignment variable. For example,</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">stop</span>(<span class="st">"boom"</span>) }</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">eval</span>(<span class="fu">quote</span>({ <span class="sc">:</span> boom</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="use-alternative-future-backend-for-future-assignment">Use alternative future backend for future assignment<a class="anchor" aria-label="anchor" href="#use-alternative-future-backend-for-future-assignment"></a></h2>



<p>Futures are evaluated on the future backend that the user has specified
by <code><a href="plan.html">plan()</a></code>. With regular futures, we can temporarily use another future
backend by wrapping our code in <code>with(plan(...), { ... }]</code>, or temporarily
inside a function using <code>with(plan(...), local = TRUE)</code>. To achieve the
same for a specific future assignment, use <code>%plan%</code>, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(multisession)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="dv">42</span> }</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="sc">%&lt;-%</span> { <span class="dv">13</span> } <span class="sc">%plan%</span> sequential</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">&gt;</span> z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span> z</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">55</span></span></code></pre><p></p></div>
<p>Here <code>x</code> is resolved in the background via the <a href="multisession.html">multisession</a> backend,
whereas <code>y</code> is resolved sequentially in the main R session.</p>
    </div>
    <div class="section level2">
    <h2 id="getting-the-future-object-of-a-future-assignment">Getting the future object of a future assignment<a class="anchor" aria-label="anchor" href="#getting-the-future-object-of-a-future-assignment"></a></h2>



<p>The underlying <a href="Future-class.html">Future</a> of a future variable <code>x</code> can be retrieved without
blocking using <code>f &lt;- <a href="futureOf.html">futureOf</a>(x)</code>, e.g.</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="sc">%&lt;-%</span> { <span class="fu">stop</span>(<span class="st">"boom"</span>) }</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> f_x <span class="ot">&lt;-</span> <span class="fu">futureOf</span>(x)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">resolved</span>(f_x)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span> x</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">eval</span>(<span class="fu">quote</span>({ <span class="sc">:</span> boom</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">value</span>(f_x)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">eval</span>(<span class="fu">quote</span>({ <span class="sc">:</span> boom</span></code></pre><p></p></div>
<p>Technically, both the future and the variable (promise) are assigned at
the same time to environment <code>assign.env</code> where the name of the future is
<code>.future_&lt;name&gt;</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9007.</p>
</div>

    </footer></div>





  </body></html>

